<div class="page-title-area">
    <div class="d-table">
        <div class="d-table-cell">
            <div class="container">
                <div class="page-title-text">
                    <h2>仕事の詳細</h2>
                    <ul>
                        <li><a routerLink="/">ホームページ</a></li>
                        <li><i class="icofont-simple-right"></i></li>
                        <li>仕事の詳細</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="job-details-area pt-100">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="job-details-item">
                    <h1>{{job?.Title}}</h1>

                    <div class="job-description mt-3 mb-3">
                        <h2>仕事内容</h2>
                        <p class="break-line">{{job?.Description}}</p>
                    </div>

                    <div class="row" *ngIf="images.length > 0">
                        <div class="col-lg-12">
                            <section class="companies-area" style="padding: 50px 0;">
                                <div class="container">
                                    <carousel [images]="images"
                                              [cellsToShow]="1"
                                              [loop]="true"
                                              [autoplay]="true"
                                              [objectFit]="'contain'"
                                              [height]="400"
                                              [autoplayInterval]="3000"
                                    >
                                    </carousel>
                                </div>
                            </section>
                        </div>
                    </div>
                    <div class="create-information mt-3">
                        <form [formGroup]="form">
                            <h3>基本情報</h3>

                            <div class="row">
                                <div class="col-6">
                                    <div class="create-information-btn">
                                        <a (click)="browser()">履歴書をアップロードする</a>
                                    </div>
                                </div>
                                <div class="col-6" *ngIf="files.length > 0">
                                    <ng-container *ngFor="let file of files; let i = index">
                                        <div class="row">
                                            <span class="col-6 over-flow file-name">{{file.name}}</span>
                                            <span class="col-6">
                                                <a *ngIf="i" (click)="onDeleteFile(i)" class="cursor-pointer">
                                                    <i class="icofont-ui-close"></i>
                                                </a>
                                            </span>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>

                            <input #fileElement
                                   hidden
                                   type="file"
                                   [accept]="allowType"
                                   class="form-control"
                                   style="padding-top: 11px;"
                                   (change)="uploadCV($event)">

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>あなたのフルネーム</label>
                                        <input formControlName="fullName" type="text" class="form-control">
                                        <a *ngIf="form.get('fullName').touched && form.get('fullName').invalid" class="error-text">
                                            すべての情報を入力してください
                                        </a>
                                    </div>
                                </div>

                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>あなたのメールアドレス</label>
                                        <input formControlName="email" type="email" class="form-control">
                                        <a *ngIf="form.get('email').touched && form.get('email').invalid" class="error-text">
                                            正しい形式で入力してください: abc@xyz.jp
                                        </a>
                                    </div>
                                </div>

                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>あなたの電話</label>
                                        <input formControlName="phoneNumber" type="text" class="form-control">
                                        <a *ngIf="form.get('phoneNumber').touched && form.get('phoneNumber').invalid" class="error-text">
                                            すべての情報を入力してください
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <button class="job-details-btn" [disabled]="form.invalid || files?.length === 0 || loading" (click)="apply()">今すぐ申し込む</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="job-details-item">
                    <div class="job-overview">
                        <h3>概要</h3>

                        <ul>
                            <li>
                                <i class="icofont-dollar"></i>
                                <p>提示された給与</p>
                                <span>{{job?.Salary}}</span>
                            </li>

                            <li>
                                <i class="icofont-users-alt-3"></i>
                                <p>量</p>
                                <span>{{job?.Number}}</span>
                            </li>

                            <li>
                                <i class="icofont-briefcase"></i>
                                <p>位置</p>
                                <span>{{job?.Position}}</span>
                            </li>

                            <li>
                                <i class="icofont-briefcase-2"></i>
                                <p>タイプ</p>
                                <span>{{job?.JobType}}</span>
                            </li>
                        </ul>
                    </div>

                    <div class="job-overview job-company">
                        <h3>住所</h3>

                        <ul>

                            <li>
                                <i class="location-pin icofont-location-pin"></i>
                                <span>
                                    <div>{{job?.CompanyName}}</div>
                                    <div>{{job?.Location}}</div>
                                </span>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
